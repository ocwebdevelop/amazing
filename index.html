<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AmazingOfferte - Accedi</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #d9f0ff, #a8d8ff);
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  text-align: center;
  color: #222;
  overflow: hidden;
}
h1 { font-size: 2rem; margin-bottom: 20px; color: #111; }
.steps {
  background: #fff;
  padding: 30px 26px;
  border-radius: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.1);
  font-size: 1rem;
  line-height: 1.6;
  max-width: 380px;
  text-align: center;
  transition: transform 0.3s ease;
}
.steps h2 { font-size: 1.2rem; margin-bottom: 20px; color: #333; }
.steps p { margin: 14px 0; font-size: 1.05rem; }
.steps p span { font-weight: bold; color: #0088cc; }
.buttons {
  margin-top: 25px;
  display: none;
  flex-direction: column;
  gap: 14px;
  width: 100%;
  max-width: 280px;
}
.btn {
  text-decoration: none;
  padding: 16px;
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: bold;
  color: white;
  display: block;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  animation: pulse 1.5s infinite;
}
.btn:hover { transform: scale(1.05); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
.telegram { background-color: #0088cc; }
.whatsapp { background-color: #25d366; }
.warning { font-size: 1.15rem; color: red; margin-top: 20px; font-weight: bold; }

/* POPUP */
#exitPopup {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content:center;
  align-items:center;
  z-index: 999;
}
#exitPopup .popup-content {
  background:#fff;
  padding: 30px;
  border-radius: 16px;
  text-align:center;
  max-width: 340px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.2);
  animation: popIn 0.3s ease forwards;
}
#exitPopup h2 { color: #111; margin-bottom: 15px; font-size: 1.6rem; }
#exitPopup p { margin-bottom: 20px; font-size: 1.35rem; }
#exitPopup .popup-btn {
  display:block;
  padding:14px;
  border-radius:12px;
  background:#0088cc;
  color:white;
  font-weight:bold;
  text-decoration:none;
  transition: transform 0.2s ease;
  animation: pulse 1.5s infinite;
}
#exitPopup .popup-btn:hover { transform: scale(1.05); }

/* FRECCIA LAMPEGGIANTE */
#arrow {
  position: fixed;
  top: 5px;
  right: 10px;
  font-size: 2.5rem;
  color: red;
  text-shadow: 0 0 4px black, 0 0 8px white;
  animation: blink 1s infinite;
  z-index: 1000;
  pointer-events: none;
}
@keyframes blink {
  0%, 100% { opacity: 1; transform: scale(1.2); }
  50% { opacity: 0.4; transform: scale(1); }
}
@keyframes popIn {
  from { transform: scale(0.5); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
</style>
</head>
<body>

<h1>Accedi alle Offerte di AmazingOfferte üöÄ</h1>

<div class="steps" id="instructions">
  <h2>üîë Per sbloccare i pulsanti dei canali:</h2>
  <p>üëâ Tocca i <span>3 puntini in alto a destra</span></p>
  <p>üëâ Seleziona <span>‚ÄúApri nel browser‚Äù</span></p>
</div>

<div class="buttons" id="buttons">
  <a href="redirect-telegram.html" class="btn telegram">üîµ Entra su Telegram</a>
  <a href="redirect-whatsapp.html" class="btn whatsapp">üü¢ Entra su WhatsApp</a>
</div>

<div class="warning" id="warning">
  üîí Completa il passaggio sopra per sbloccare i pulsanti ai canali
</div>

<!-- POPUP -->
<div id="exitPopup">
  <div class="popup-content">
    <h2>‚è≥ Ehi, aspetta!</h2>
    <p id="popupMessage">So che stai per chiudere la pagina, ma <strong>le offerte migliori ti aspettano</strong>! Non perderle!</p>
    <a href="#" id="popupBtn" class="popup-btn">Apri nel browser e continua</a>
  </div>
</div>

<!-- FRECCIA -->
<div id="arrow">‚¨ÜÔ∏è</div>

<script>
function isInWebview() {
  const ua = navigator.userAgent.toLowerCase();
  const isIOS = /iphone|ipad|ipod/.test(ua);
  const isAndroid = /android/.test(ua);
  const iosWebview = isIOS && !window.navigator.standalone && !ua.includes("safari");
  const androidWebview = isAndroid && (ua.includes("wv") || /version\/\d+.\d+/.test(ua));
  return iosWebview || androidWebview;
}
function isOwner() {
  const params = new URLSearchParams(window.location.search);
  return params.get("me") === "true";
}

window.onload = function() {
  if (isInWebview() && !isOwner()) {
    const counterWebview = document.createElement("img");
    counterWebview.src = "https://hits.sh/ocwebdevelop.github.io/landing-webview-v2.svg";
    counterWebview.alt = "Hits Webview";
    counterWebview.style.display = "none";
    document.body.appendChild(counterWebview);

    const popup = document.getElementById("exitPopup");
    const popupBtn = document.getElementById("popupBtn");

    // Mostra popup dopo 6 secondi automaticamente
    setTimeout(()=>{
      popup.style.display = "flex";
      if (navigator.vibrate) { navigator.vibrate(150); }
    }, 6000);

    popupBtn.onclick = function(e){
      e.preventDefault();
      alert("Ora tocca a te: usa i 3 puntini > Apri nel browser");
    };

  } else {
    document.getElementById("buttons").style.display = "flex";
    document.getElementById("warning").style.display = "none";
    document.getElementById("instructions").style.display = "none";
    document.getElementById("arrow").style.display = "none";
  }
};
</script>
</body>
</html>
